(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{yTQB:function(e,n,t){"use strict";t.r(n),t.d(n,"CoreSiteHomeLazyModule",(function(){return R}));var o=t("tyNb"),i=t("L3Fv"),c=t("5p9q"),a=t("Fjfc"),_=t("mrSG"),r=t("ULAo"),s=t("3LXp"),l=t("9+EE"),d=t("SV+s"),g=t("Xzvb"),m=t("fjkH"),u=t("GBcW"),p=t("yQ+R"),C=t("zbKZ"),h=t("pHTc"),f=t("0NpS"),S=t("bFG1"),I=t("8vmT"),x=t("D7J2"),H=t("cGu0"),P=t("fXoL"),T=t("ACV2"),b=t("ofXK"),v=t("nt/U"),y=t("TEn/"),E=t("PgjG"),O=t("ACYt"),w=t("3CSS"),M=t("hMzs"),k=t("1Y1L"),D=t("nEkO"),V=t("aSim"),F=t("r8G5"),L=t("sYmb");function CoreSiteHomeIndexPage_ion_button_1_Template(e,n){if(1&e){const e=P.Fc();P.Ec(0,"ion-button",14),P.Mc("click",(function CoreSiteHomeIndexPage_ion_button_1_Template_ion_button_click_0_listener(){P.fd(e);return P.Oc().openSearch()})),P.Pc(1,"translate"),P.zc(2,"ion-icon",15),P.Dc()}2&e&&P.mc("aria-label",P.Qc(1,1,"core.courses.searchcourses"))}function CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template(e,n){if(1&e&&(P.Ec(0,"ion-item",18),P.Ec(1,"ion-label"),P.zc(2,"core-format-text",19),P.Dc(),P.Dc()),2&e){const e=P.Oc(2);P.lc(2),P.Vc("text",e.section.summary)("contextInstanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template(e,n){if(1&e&&P.zc(0,"core-course-module",20),2&e){const e=n.$implicit,t=P.Oc(2);P.Vc("module",e)("section",t.section)}}function CoreSiteHomeIndexPage_ng_container_8_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template,3,2,"ion-item",16),P.nd(2,CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template,1,2,"core-course-module",17),P.Bc()),2&e){const e=P.Oc();P.lc(1),P.Vc("ngIf",e.section.summary),P.lc(1),P.Vc("ngForOf",e.section.modules)}}function CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template(e,n){1&e&&P.zc(0,"core-spacer")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template(e,n){1&e&&P.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template,1,0,void 0,24),P.Bc()),2&e){P.Oc(3);const e=P.ed(13);P.lc(1),P.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template(e,n){1&e&&P.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template,1,0,void 0,24),P.Bc()),2&e){P.Oc(3);const e=P.ed(17);P.lc(1),P.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template(e,n){1&e&&P.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template,1,0,void 0,24),P.Bc()),2&e){P.Oc(3);const e=P.ed(21);P.lc(1),P.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template(e,n){1&e&&P.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template,1,0,void 0,24),P.Bc()),2&e){P.Oc(3);const e=P.ed(19);P.lc(1),P.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template(e,n){1&e&&P.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template,1,0,void 0,24),P.Bc()),2&e){P.Oc(3);const e=P.ed(15);P.lc(1),P.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template(e,n){if(1&e&&(P.Cc(0),P.Cc(1,22),P.nd(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template,2,1,"ng-container",23),P.nd(3,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template,2,1,"ng-container",23),P.nd(4,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template,2,1,"ng-container",23),P.nd(5,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template,2,1,"ng-container",23),P.nd(6,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template,2,1,"ng-container",23),P.Bc(),P.Bc()),2&e){const e=n.$implicit;P.lc(1),P.Vc("ngSwitch",e),P.lc(1),P.Vc("ngSwitchCase","LIST_OF_COURSE"),P.lc(1),P.Vc("ngSwitchCase","LIST_OF_CATEGORIES"),P.lc(1),P.Vc("ngSwitchCase","COURSE_SEARCH_BOX"),P.lc(1),P.Vc("ngSwitchCase","ENROLLED_COURSES"),P.lc(1),P.Vc("ngSwitchCase","NEWS_ITEMS")}}function CoreSiteHomeIndexPage_ng_container_9_Template(e,n){if(1&e&&(P.Cc(0),P.nd(1,CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template,1,0,"core-spacer",6),P.nd(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template,7,6,"ng-container",21),P.Bc()),2&e){const e=P.Oc();P.lc(1),P.Vc("ngIf",e.section&&e.section.hasContent),P.lc(1),P.Vc("ngForOf",e.items)}}function CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template(e,n){if(1&e&&P.zc(0,"core-block-side-blocks-button",25),2&e){const e=P.Oc();P.Vc("instanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_core_empty_box_11_Template(e,n){1&e&&(P.zc(0,"core-empty-box",26),P.Pc(1,"translate")),2&e&&P.Vc("message",P.Qc(1,1,"core.course.nocontentavailable"))}function CoreSiteHomeIndexPage_ng_template_12_Template(e,n){if(1&e){const e=P.Fc();P.Ec(0,"ion-card"),P.Ec(1,"ion-item",27),P.Mc("click",(function CoreSiteHomeIndexPage_ng_template_12_Template_ion_item_click_1_listener(){P.fd(e);return P.Oc().openAvailableCourses()})),P.zc(2,"ion-icon",28),P.Ec(3,"ion-label"),P.Ec(4,"p",29),P.pd(5),P.Pc(6,"translate"),P.Dc(),P.Dc(),P.Dc(),P.Dc()}2&e&&(P.lc(5),P.qd(P.Qc(6,1,"core.courses.availablecourses")))}function CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template(e,n){if(1&e&&P.zc(0,"core-course-module",31),2&e){const e=P.Oc(2);P.Vc("module",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_14_Template(e,n){if(1&e&&P.nd(0,CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template,1,1,"core-course-module",30),2&e){const e=P.Oc();P.Vc("ngIf",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_16_Template(e,n){if(1&e){const e=P.Fc();P.Ec(0,"ion-card"),P.Ec(1,"ion-item",27),P.Mc("click",(function CoreSiteHomeIndexPage_ng_template_16_Template_ion_item_click_1_listener(){P.fd(e);return P.Oc().openCourseCategories()})),P.zc(2,"ion-icon",32),P.Ec(3,"ion-label"),P.Ec(4,"p",29),P.pd(5),P.Pc(6,"translate"),P.Dc(),P.Dc(),P.Dc(),P.Dc()}2&e&&(P.lc(5),P.qd(P.Qc(6,1,"core.courses.categories")))}function CoreSiteHomeIndexPage_ng_template_18_Template(e,n){if(1&e){const e=P.Fc();P.Ec(0,"ion-card"),P.Ec(1,"ion-item",27),P.Mc("click",(function CoreSiteHomeIndexPage_ng_template_18_Template_ion_item_click_1_listener(){P.fd(e);return P.Oc().openMyCourses()})),P.zc(2,"ion-icon",28),P.Ec(3,"ion-label"),P.Ec(4,"p",29),P.pd(5),P.Pc(6,"translate"),P.Dc(),P.Dc(),P.Dc(),P.Dc()}2&e&&(P.lc(5),P.qd(P.Qc(6,1,"core.courses.mycourses")))}function CoreSiteHomeIndexPage_ng_template_20_Template(e,n){if(1&e){const e=P.Fc();P.Ec(0,"ion-card"),P.Ec(1,"ion-item",27),P.Mc("click",(function CoreSiteHomeIndexPage_ng_template_20_Template_ion_item_click_1_listener(){P.fd(e);return P.Oc().openSearch()})),P.zc(2,"ion-icon",33),P.Ec(3,"ion-label"),P.Ec(4,"p",29),P.pd(5),P.Pc(6,"translate"),P.Dc(),P.Dc(),P.Dc(),P.Dc()}2&e&&(P.lc(5),P.qd(P.Qc(6,1,"core.courses.searchcourses")))}let z=(()=>{class CoreSiteHomeIndexPage{constructor(e){this.route=e,this.dataLoaded=!1,this.hasContent=!1,this.hasBlocks=!1,this.items=[],this.siteHomeId=1,this.searchEnabled=!1,this.updateSiteObserver=m.b.on(m.b.SITE_UPDATED,(()=>{this.searchEnabled=!g.a.isSearchCoursesDisabledInSite()}),l.c.getCurrentSiteId()),this.logView=I.a.once((()=>Object(_.a)(this,void 0,void 0,(function*(){var e,n;yield S.a.ignoreErrors(r.a.logView(this.siteHomeId)),x.a.logEvent({type:x.b.VIEW_ITEM,ws:"core_course_view_course",name:null!==(n=null===(e=this.currentSite.getInfo())||void 0===e?void 0:e.sitename)&&void 0!==n?n:"",data:{id:this.siteHomeId,category:"course"},url:"/?redirect=0"})}))))}ngOnInit(){this.searchEnabled=!g.a.isSearchCoursesDisabledInSite(),this.currentSite=l.c.getRequiredCurrentSite(),this.siteHomeId=l.c.getCurrentSiteHomeId();const e=h.a.getRouteParam("module");if(e){let n=h.a.getRouteParam("modNavOptions");if(!n){const e=h.a.getRouteParam("modParams");e&&(n={params:e})}u.a.openModule(e,this.siteHomeId,{modNavOptions:n})}this.loadContent().finally((()=>{this.dataLoaded=!0})),this.openFocusedInstance(),this.route.queryParams.subscribe((()=>this.openFocusedInstance()))}loadContent(){return Object(_.a)(this,void 0,void 0,(function*(){this.hasContent=!1;const e=this.currentSite.getStoredConfig()||{numsections:1,frontpageloggedin:void 0};if(this.items=yield d.a.getFrontPageItems(e.frontpageloggedin),this.hasContent=this.items.length>0,this.items.includes("NEWS_ITEMS"))try{const e=yield d.a.getNewsForum(this.siteHomeId);this.newsForumModule=yield r.a.getModule(e.cmid,e.course),this.newsForumModule.handlerData=yield p.a.getModuleDataFor(this.newsForumModule.modname,this.newsForumModule,this.siteHomeId,void 0,!0)}catch(e){}try{const n=yield r.a.getSections(this.siteHomeId,!1,!0);if(this.section=e.numsections?n.find((e=>1==e.section)):void 0,this.section){const e=yield u.a.addHandlerDataForModules([this.section],this.siteHomeId,void 0,void 0,!0);this.section.hasContent=e.hasContent,this.hasContent=e.hasContent||this.hasContent}this.logView()}catch(e){s.a.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)}this.hasBlocks=yield f.a.hasCourseBlocks(this.siteHomeId)}))}doRefresh(e){const n=[];n.push(r.a.invalidateSections(this.siteHomeId)),n.push(this.currentSite.invalidateConfig().then((()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.currentSite.getConfig();this.currentSite.setConfig(e)}))))),n.push(r.a.invalidateCourseBlocks(this.siteHomeId)),this.section&&this.section.modules&&n.push(C.a.invalidateModules(this.section.modules,this.siteHomeId)),Promise.all(n).finally((()=>Object(_.a)(this,void 0,void 0,(function*(){yield this.loadContent().finally((()=>{null==e?void 0:e.complete()}))}))))}openSearch(){h.a.navigateToSitePath("courses/list",{params:{mode:"search"}})}openAvailableCourses(){h.a.navigateToSitePath("courses/list",{params:{mode:"all"}})}openMyCourses(){h.a.navigateToSitePath("courses/list",{params:{mode:"my"}})}openCourseCategories(){h.a.navigateToSitePath("courses/categories")}ngOnDestroy(){this.updateSiteObserver.off()}openFocusedInstance(){const e=h.a.getRouteNumberParam("blockInstanceId");e&&s.a.openSideModal({component:H.a,componentProps:{contextLevel:"course",instanceId:this.siteHomeId,initialBlockInstanceId:e}})}}return CoreSiteHomeIndexPage.ɵfac=function CoreSiteHomeIndexPage_Factory(e){return new(e||CoreSiteHomeIndexPage)(P.yc(o.a))},CoreSiteHomeIndexPage.ɵcmp=P.sc({type:CoreSiteHomeIndexPage,selectors:[["page-core-sitehome-index"]],decls:22,vars:10,consts:[["slot","end","prepend",""],[3,"click",4,"ngIf"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"core-course-module-list-wrapper"],[4,"ngIf"],["slot","fixed","contextLevel","course",3,"instanceId",4,"ngIf"],["icon","fas-box-open",3,"message",4,"ngIf"],["allCourseList",""],["news",""],["categories",""],["enrolledCourseList",""],["courseSearch",""],[3,"click"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["class","ion-text-wrap section-summary",4,"ngIf"],[3,"module","section",4,"ngFor","ngForOf"],[1,"ion-text-wrap","section-summary"],["contextLevel","course",3,"text","contextInstanceId"],[3,"module","section"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],["slot","fixed","contextLevel","course",3,"instanceId"],["icon","fas-box-open",3,"message"],["button","",1,"ion-text-wrap",3,"click"],["name","fas-graduation-cap","fixed-width","","slot","start","aria-hidden","true"],[1,"item-heading"],["class","core-sitehome-news",3,"module",4,"ngIf"],[1,"core-sitehome-news",3,"module"],["name","fas-folder","slot","start","aria-hidden","true"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"]],template:function CoreSiteHomeIndexPage_Template(e,n){1&e&&(P.Ec(0,"core-navbar-buttons",0),P.nd(1,CoreSiteHomeIndexPage_ion_button_1_Template,3,3,"ion-button",1),P.Dc(),P.Ec(2,"ion-content"),P.Ec(3,"ion-refresher",2),P.Mc("ionRefresh",(function CoreSiteHomeIndexPage_Template_ion_refresher_ionRefresh_3_listener(e){return n.doRefresh(e.target)})),P.zc(4,"ion-refresher-content",3),P.Pc(5,"translate"),P.Dc(),P.Ec(6,"core-loading",4),P.Ec(7,"ion-list",5),P.nd(8,CoreSiteHomeIndexPage_ng_container_8_Template,3,2,"ng-container",6),P.nd(9,CoreSiteHomeIndexPage_ng_container_9_Template,3,2,"ng-container",6),P.Dc(),P.nd(10,CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template,1,1,"core-block-side-blocks-button",7),P.nd(11,CoreSiteHomeIndexPage_core_empty_box_11_Template,2,3,"core-empty-box",8),P.Dc(),P.Dc(),P.nd(12,CoreSiteHomeIndexPage_ng_template_12_Template,7,3,"ng-template",null,9,P.od),P.nd(14,CoreSiteHomeIndexPage_ng_template_14_Template,1,1,"ng-template",null,10,P.od),P.nd(16,CoreSiteHomeIndexPage_ng_template_16_Template,7,3,"ng-template",null,11,P.od),P.nd(18,CoreSiteHomeIndexPage_ng_template_18_Template,7,3,"ng-template",null,12,P.od),P.nd(20,CoreSiteHomeIndexPage_ng_template_20_Template,7,3,"ng-template",null,13,P.od)),2&e&&(P.lc(1),P.Vc("ngIf",n.searchEnabled),P.lc(2),P.Vc("disabled",!n.dataLoaded),P.lc(1),P.Wc("pullingText",P.Qc(5,8,"core.pulltorefresh")),P.lc(2),P.Vc("hideUntil",n.dataLoaded),P.lc(2),P.Vc("ngIf",n.section&&n.section.hasContent),P.lc(1),P.Vc("ngIf",n.items.length>0),P.lc(1),P.Vc("ngIf",n.hasBlocks),P.lc(1),P.Vc("ngIf",!n.hasContent))},directives:[T.a,b.t,v.a,y.v,y.bb,y.cb,E.a,y.P,O.a,y.l,y.D,w.a,b.s,y.I,y.O,M.a,k.a,D.a,b.x,b.y,b.A,V.a,F.a,y.n],pipes:[L.d],styles:["ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:inline-block;border-radius:var(--radius-xs);padding:4px;background-color:var(--gray-100);color:var(--gray-900);line-height:var(--size);--margin-end:8px;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}core-spacer[_ngcontent-%COMP%]{--spacer-horizontal:10px}"]}),CoreSiteHomeIndexPage})();const B=[{path:"",component:z}];let R=(()=>{class CoreSiteHomeLazyModule{}return CoreSiteHomeLazyModule.ɵmod=P.wc({type:CoreSiteHomeLazyModule}),CoreSiteHomeLazyModule.ɵinj=P.vc({factory:function CoreSiteHomeLazyModule_Factory(e){return new(e||CoreSiteHomeLazyModule)},imports:[[o.m.forChild(B),i.a,c.a,a.a],o.m]}),CoreSiteHomeLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&P.kd(R,{declarations:[z],imports:[o.m,i.a,c.a,a.a],exports:[o.m]}))}}]);